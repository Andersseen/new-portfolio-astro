---
interface Props {
  id: string;
  color: 'primary' | 'secondary' | 'accent' | 'success' | 'warning';
  badge: string;
  title: string;
  description: string;
  tags: string[];
  colSpan?: 'md:col-span-1' | 'md:col-span-2';
  decorative?: 'right' | 'left' | 'circle' | null;
}

const {
  id,
  color,
  badge,
  title,
  description,
  tags,
  colSpan = 'md:col-span-2',
  decorative = 'right'
} = Astro.props;

const colorMap = {
  primary: { badge: 'bg-primary/15 text-primary', gradient: 'from-primary/10 to-secondary/10', tag: 'bg-primary/10 border-primary/20 text-primary', decorLeft: 'from-primary/20 border-primary/10', decorCircle: 'from-primary/30', border: 'hover:border-primary/50', shadow: 'hover:shadow-primary/10' },
  secondary: { badge: 'bg-secondary/15 text-secondary', gradient: 'from-secondary/10 to-accent/10', tag: 'bg-secondary/10 border-secondary/20 text-secondary', decorLeft: 'from-secondary/20 border-secondary/10', decorCircle: 'from-secondary/30', border: 'hover:border-secondary/50', shadow: 'hover:shadow-secondary/10' },
  accent: { badge: 'bg-accent/15 text-accent', gradient: 'from-accent/10 to-primary/10', tag: 'bg-accent/10 border-accent/20 text-accent', decorLeft: 'from-accent/20 border-accent/10', decorCircle: 'from-accent/30', border: 'hover:border-accent/50', shadow: 'hover:shadow-accent/10' },
  success: { badge: 'bg-success/15 text-success', gradient: 'from-success/10 to-primary/10', tag: 'bg-success/10 border-success/20 text-success', decorLeft: 'from-success/20 border-success/10', decorCircle: 'from-success/30', border: 'hover:border-success/50', shadow: 'hover:shadow-success/10' },
  warning: { badge: 'bg-warning/15 text-warning', gradient: 'from-warning/10 to-accent/10', tag: 'bg-warning/10 border-warning/20 text-warning', decorLeft: 'from-warning/20 border-warning/10', decorCircle: 'from-warning/30', border: 'hover:border-warning/50', shadow: 'hover:shadow-warning/10' },
};

const colors = colorMap[color];
---

<div class={`group relative ${colSpan} rounded-3xl overflow-hidden bg-background-secondary border border-border ${colors.border} transition-all duration-300 hover:shadow-lg ${colors.shadow} cursor-grab active:cursor-grabbing`} data-swapy-slot={id}>
  <div class="w-full h-full" data-swapy-item={id}>
    <!-- Background gradient -->
    <div class={`absolute inset-0 bg-linear-to-br ${colors.gradient} opacity-0 group-hover:opacity-100 transition-opacity duration-500`}></div>
    
    <!-- Content -->
    <div class="absolute inset-0 p-8 flex flex-col justify-between z-10">
      <div>
        <span class={`inline-block px-3 py-1 rounded-full ${colors.badge} text-xs font-medium mb-4`}>
          <slot name="badge">{badge}</slot>
        </span>
        <h3 class="text-3xl font-bold text-foreground mb-2">
          <slot name="title">{title}</slot>
        </h3>
        <p class="text-foreground-secondary max-w-md">
          <slot name="description">{description}</slot>
        </p>
      </div>
      
      <!-- Tags -->
      <div class="flex items-center gap-4">
        <slot name="tags">
          {tags.map((tag) => (
            <span class={`px-3 py-1 rounded-lg ${colors.tag} text-sm font-medium`}>
              {tag}
            </span>
          ))}
        </slot>
      </div>
    </div>

    <!-- Decorative element - Right -->
    {decorative === 'right' && (
      <div class="absolute right-0 bottom-0 w-1/2 h-4/5 bg-linear-to-tl from-primary/20 to-transparent rounded-tl-3xl border-t border-l border-primary/10 translate-y-4 translate-x-4 group-hover:translate-y-2 group-hover:translate-x-2 transition-transform duration-500"></div>
    )}

    <!-- Decorative element - Left -->
    {decorative === 'left' && (
      <div class="absolute left-0 bottom-0 w-1/2 h-4/5 bg-linear-to-tr from-success/20 to-transparent rounded-tr-3xl border-t border-r border-success/10 translate-y-4 -translate-x-4 group-hover:translate-y-2 group-hover:-translate-x-2 transition-transform duration-500"></div>
    )}

    <!-- Decorative element - Circle -->
    {decorative === 'circle' && (
      <div class="absolute right-8 top-8 w-32 h-32 bg-linear-to-br from-accent/30 to-primary/20 rounded-full blur-3xl group-hover:blur-2xl transition-all duration-500 opacity-0 group-hover:opacity-100"></div>
    )}
  </div>
</div>
