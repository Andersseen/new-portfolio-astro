---
import { t } from '@i18n/utils';
import { getLanguageFromPath } from '@i18n/config';
import Card from '@componentes/Card.astro';
import TechStack from '@componentes/TechStack.astro';
import SocialLinks from '@componentes/SocialLinks.astro';
import ServicesList from '@componentes/ServicesList.astro';
import PortfolioHeader from '@componentes/PortfolioHeader.astro';

const lang = getLanguageFromPath(Astro.url.pathname);
const tr = (key: string) => t(lang, key);
---

<section class="py-16 px-4 max-w-7xl mx-auto">
  <PortfolioHeader name="Andersseen Dev" />
  
  <div class="grid grid-cols-1 md:grid-cols-3 gap-6 auto-rows-[300px]" id="portfolio-grid" data-swapy-container>
    
    <!-- Card 1: Projects -->
    <Card id="card-1" colSpan="md:col-span-2">
      <div class="group relative rounded-3xl overflow-hidden bg-background-secondary h-full cursor-grab active:cursor-grabbing">
        <div class="absolute inset-0 bg-linear-to-br from-primary/10 to-secondary/10 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
        <div class="absolute inset-0 p-8 flex flex-col justify-between z-10">
          <div>
            <span class="inline-block px-3 py-1 rounded-full bg-primary/15 text-primary text-xs font-medium mb-4">Featured</span>
            <h3 class="text-3xl font-bold text-foreground mb-2">{tr('portfolio.projects.title')}</h3>
            <p class="text-foreground-secondary">{tr('portfolio.projects.description')}</p>
          </div>
          <div class="flex items-center gap-2 text-sm text-foreground-secondary group-hover:text-primary transition-colors">
            Explore projects <span class="group-hover:translate-x-1 transition-transform">â†’</span>
          </div>
        </div>
      </div>
    </Card>

    <!-- Card 2: About Me -->
    <Card id="card-2" colSpan="md:col-span-1">
      <div class="w-full h-full p-8 flex flex-col justify-center items-center text-center">
        <div class="w-16 h-16 rounded-full bg-linear-to-br from-secondary to-accent mb-4 flex items-center justify-center text-3xl shadow-lg shadow-secondary/30">
          ðŸ‘‹
        </div>
        <h3 class="text-xl font-bold text-foreground mb-2">{tr('portfolio.aboutMe.title')}</h3>
        <p class="text-foreground-secondary text-sm">{tr('portfolio.aboutMe.description')}</p>
      </div>
    </Card>
      <!-- Card 5: Design System -->
    <Card id="card-5" colSpan="md:col-span-1">
      <div class="group relative rounded-3xl overflow-hidden bg-background-secondary h-full cursor-grab active:cursor-grabbing">
        <div class="absolute inset-0 bg-linear-to-br from-accent/10 to-primary/10 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
        <div class="absolute inset-0 p-8 flex flex-col justify-between z-10">
          <div>
            <h3 class="text-xl font-bold text-foreground mb-2">{tr('portfolio.design.title')}</h3>
            <p class="text-foreground-secondary text-sm">{tr('portfolio.design.description')}</p>
          </div>
          <div class="flex items-center gap-2 text-sm text-foreground-secondary group-hover:text-accent transition-colors">
            View system <span class="group-hover:translate-x-1 transition-transform">â†’</span>
          </div>
        </div>
      </div>
    </Card>

    <!-- Card 6: Social Links -->
    <Card id="card-6" colSpan="md:col-span-1">
      <div class="w-full h-full p-8 flex flex-col justify-center items-center text-center">
        <h3 class="text-xl font-bold text-foreground mb-6">{tr('portfolio.social.title')}</h3>
        <SocialLinks
          links={[
            { icon: 'github', url: '#', color: 'primary' },
            { icon: 'gitlab', url: '#', color: 'secondary' },
            { icon: 'medium', url: '#', color: 'accent' },
          ]}
        />
      </div>
    </Card>

    <!-- Card 7: Services -->
    <Card id="card-7" colSpan="md:col-span-1">
      <div class="w-full h-full p-8 flex flex-col justify-between">
        <h3 class="text-xl font-bold text-foreground mb-4">{tr('portfolio.services.title')}</h3>
        <ServicesList
          services={[
            { text: tr('portfolio.services.uiux'), gradient: 'primary-secondary' },
            { text: tr('portfolio.services.web'), gradient: 'secondary-accent' },
            { text: tr('portfolio.services.desktop'), gradient: 'accent-primary' },
            { text: tr('portfolio.services.devops'), gradient: 'success-primary' },
          ]}
        />
      </div>
    </Card>

    <!-- Card 3: Tech Stack -->
    <Card id="card-3" colSpan="md:col-span-1">
      <div class="w-full h-full p-6 flex flex-col justify-center">
        <h3 class="text-lg font-bold text-foreground mb-6 text-center">{tr('portfolio.stack.title')}</h3>
        <div class="grid grid-cols-2 gap-3">
          <div class="flex flex-col items-center justify-center p-3 rounded-lg bg-primary/10 border border-primary/20 hover:bg-primary/15 transition-all">
            <div class="w-6 h-6 rounded bg-linear-to-br from-primary to-secondary mb-2"></div>
            <span class="text-xs font-medium text-foreground-secondary">TS</span>
          </div>
          <div class="flex flex-col items-center justify-center p-3 rounded-lg bg-secondary/10 border border-secondary/20 hover:bg-secondary/15 transition-all">
            <div class="w-6 h-6 rounded bg-linear-to-br from-secondary to-accent mb-2"></div>
            <span class="text-xs font-medium text-foreground-secondary">NX</span>
          </div>
          <div class="flex flex-col items-center justify-center p-3 rounded-lg bg-accent/10 border border-accent/20 hover:bg-accent/15 transition-all">
            <div class="w-6 h-6 rounded bg-linear-to-br from-accent to-primary mb-2"></div>
            <span class="text-xs font-medium text-foreground-secondary">Angular</span>
          </div>
          <div class="flex flex-col items-center justify-center p-3 rounded-lg bg-warning/10 border border-warning/20 hover:bg-warning/15 transition-all">
            <div class="w-6 h-6 rounded bg-linear-to-br from-warning to-accent mb-2"></div>
            <span class="text-xs font-medium text-foreground-secondary">Docker</span>
          </div>
        </div>
      </div>
    </Card>

    <!-- Card 4: Articles -->
    <Card id="card-4" colSpan="md:col-span-2">
      <div class="group relative rounded-3xl overflow-hidden bg-background-secondary h-full cursor-grab active:cursor-grabbing">
        <div class="absolute inset-0 bg-linear-to-br from-success/10 to-primary/10 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
        <div class="absolute inset-0 p-8 flex flex-col justify-between z-10">
          <div>
            <span class="inline-block px-3 py-1 rounded-full bg-success/15 text-success text-xs font-medium mb-4">Recent</span>
            <h3 class="text-3xl font-bold text-foreground mb-2">{tr('portfolio.articles.title')}</h3>
            <p class="text-foreground-secondary">{tr('portfolio.articles.description')}</p>
          </div>
          <div class="flex items-center gap-2 text-sm text-foreground-secondary group-hover:text-success transition-colors">
            Read articles <span class="group-hover:translate-x-1 transition-transform">â†’</span>
          </div>
        </div>
      </div>
    </Card>
</section>

<script>
  import { initSwapyGrid } from '@scripts/swapy-grid';
  
  // Initialize Swapy when the DOM is ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', () => {
      initSwapyGrid();
    });
  } else {
    initSwapyGrid();
  }
</script>

<style>
  :global([data-swapy-slot]) {
    transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  :global([data-swapy-item]) {
    transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
  }
</style>
