---
import { t } from '@i18n/utils';
import { getLanguageFromPath } from '@i18n/config';
import PortfolioGrid from './PortfolioGrid';
import PortfolioHeader from '@componentes/PortfolioHeader.astro';

const lang = getLanguageFromPath(Astro.url.pathname);
const tr = (key: string) => t(lang, key);

import type { PortfolioItem } from './PortfolioGrid';

import ModalManager from './ModalManager';

const items: PortfolioItem[] = [
  {
    id: 'card-1',
    type: 'projects',
    title: tr('portfolio.projects.title'),
    description: tr('portfolio.projects.description'),
    details: `<div class="space-y-4">
      <h3 class="text-xl font-bold">Commercial Projects</h3>
      <p>Here you will find a selection of projects developed for clients in various industries.</p>
      <ul class="list-disc pl-5">
        <li>E-commerce Platform for Retail</li>
        <li>Banking Dashboard for Fintech</li>
        <li>Real Estate Management System</li>
      </ul>
    </div>`,
    colSpan: 'col-span-2'
  },
  {
    id: 'card-2',
    type: 'community', // Replaced 'about'
    title: 'Community',
    description: 'Open source contributions and community work.',
    details: `<div class="space-y-4">
      <h3 class="text-xl font-bold">Community & Open Source</h3>
      <p>I believe in giving back to the community. Here are some of my contributions:</p>
      <div class="grid grid-cols-1 gap-2">
         <a href="#" class="block p-3 rounded-lg bg-background-tertiary hover:bg-background-secondary transition-colors">
            <div class="font-bold">Astro Portfolio Template</div>
            <div class="text-sm text-foreground-secondary">A highly performant portfolio starter.</div>
         </a>
         <a href="#" class="block p-3 rounded-lg bg-background-tertiary hover:bg-background-secondary transition-colors">
            <div class="font-bold">React UI Kit</div>
            <div class="text-sm text-foreground-secondary">Accessible component library.</div>
         </a>
      </div>
    </div>`,
    colSpan: 'col-span-1'
  },
  {
    id: 'card-5',
    type: 'design',
    title: tr('portfolio.design.title'),
    description: tr('portfolio.design.description'),
    details: `<div class="grid grid-cols-2 gap-4">
      <img src="https://ui.shadcn.com/avatars/04.png" alt="Design 1" class="rounded-lg shadow-sm" />
      <img src="https://ui.shadcn.com/avatars/02.png" alt="Design 2" class="rounded-lg shadow-sm" />
    </div>`,
    colSpan: 'col-span-1'
  },
  {
    id: 'card-6',
    type: 'social',
    title: tr('portfolio.social.title'),
    colSpan: 'col-span-1',
    content: [
      { icon: 'github', url: '#', color: 'primary', label: 'GitHub Profile' },
      { icon: 'gitlab', url: '#', color: 'secondary', label: 'GitLab Profile' },
      { icon: 'medium', url: '#', color: 'accent', label: 'Medium Blog' },
    ]
  },
  {
    id: 'card-7',
    type: 'services',
    title: tr('portfolio.services.title'),
    colSpan: 'col-span-1',
    content: [
      { text: tr('portfolio.services.uiux'), gradient: 'from-primary to-secondary', details: "Creating intuitive and beautiful user interfaces." },
      { text: tr('portfolio.services.web'), gradient: 'from-secondary to-accent', details: "Full-stack web development with modern technologies." },
      { text: tr('portfolio.services.desktop'), gradient: 'from-accent to-primary', details: "Cross-platform desktop applications." },
      { text: tr('portfolio.services.devops'), gradient: 'from-success to-primary', details: "CI/CD pipelines and cloud infrastructure." },
    ]
  },
  {
    id: 'card-3',
    type: 'stack',
    title: tr('portfolio.stack.title'),
    colSpan: 'col-span-1',
    content: [
      { name: 'TS', icon: 'ts', color: 'primary', description: "Advanced TypeScript patterns." },
      { name: 'NX', icon: 'nx', color: 'secondary', description: "Monorepo management at scale." },
      { name: 'Angular', icon: 'angular', color: 'accent', description: "Enterprise application development." },
      { name: 'Docker', icon: 'docker', color: 'warning', description: "Containerization and orchestration." },
    ]
  },
  {
    id: 'card-4',
    type: 'articles',
    title: tr('portfolio.articles.title'),
    description: tr('portfolio.articles.description'),
    details: `<div class="space-y-3">
        <a href="#" class="flex items-center justify-between p-3 rounded-lg border border-border hover:border-accent transition-colors group">
           <span>The Future of Astro Islands</span>
           <span class="text-accent group-hover:translate-x-1 transition-transform">→</span>
        </a>
        <a href="#" class="flex items-center justify-between p-3 rounded-lg border border-border hover:border-accent transition-colors group">
           <span>Understanding TypeScript Generics</span>
           <span class="text-accent group-hover:translate-x-1 transition-transform">→</span>
        </a>
        <a href="#" class="flex items-center justify-between p-3 rounded-lg border border-border hover:border-accent transition-colors group">
           <span>Effective State Management</span>
           <span class="text-accent group-hover:translate-x-1 transition-transform">→</span>
        </a>
    </div>`,
    colSpan: 'col-span-2'
  }
];
---

<section class="py-16 px-4 max-w-7xl mx-auto">
  <PortfolioGrid client:load initialItems={items} />
  <ModalManager client:idle />
</section>
