---
import { t } from '@i18n/utils';
import { getLanguageFromPath } from '@i18n/config';
import PortfolioCardLarge from '@componentes/PortfolioCardLarge.astro';
import PortfolioCardSmall from '@componentes/PortfolioCardSmall.astro';
import TechStack from '@componentes/TechStack.astro';
import SocialLinks from '@componentes/SocialLinks.astro';
import ServicesList from '@componentes/ServicesList.astro';
import PortfolioHeader from '@componentes/PortfolioHeader.astro';

const lang = getLanguageFromPath(Astro.url.pathname);
const tr = (key: string) => t(lang, key);
---

<section class="py-16 px-4 max-w-7xl mx-auto">
  <PortfolioHeader name="Andersseen Dev" />
  
  <div class="grid grid-cols-1 md:grid-cols-3 gap-6 auto-rows-[300px]" id="portfolio-grid" data-swapy-container>
    
    <!-- Card 1: E-commerce Dashboard -->
    <PortfolioCardLarge
      id="card-1"
      color="primary"
      badge={tr('portfolio.featured')}
      title={tr('portfolio.ecommerce.title')}
      description={tr('portfolio.ecommerce.description')}
      tags={['React', 'Node.js', 'Tailwind']}
      colSpan="md:col-span-2"
      decorative="right"
    />

    <!-- Card 2: About Me -->
    <PortfolioCardSmall
      id="card-2"
      color="secondary"
      title={tr('portfolio.aboutMe.title')}
      icon="ðŸ‘‹"
    >
      <p class="text-foreground-secondary text-sm">{tr('portfolio.aboutMe.description')}</p>
    </PortfolioCardSmall>

    <!-- Card 3: Tech Stack -->
    <PortfolioCardSmall id="card-3" color="primary" title={tr('portfolio.stack.title')} centered={false}>
      <TechStack
        technologies={[
          { name: 'React', color: 'primary' },
          { name: 'Astro', color: 'secondary' },
          { name: 'JS', color: 'accent' },
          { name: 'Node', color: 'success' },
        ]}
      />
    </PortfolioCardSmall>

    <!-- Card 4: Finance App -->
    <PortfolioCardLarge
      id="card-4"
      color="success"
      badge={tr('portfolio.recent')}
      title={tr('portfolio.finance.title')}
      description={tr('portfolio.finance.description')}
      tags={['React Native', 'Firebase']}
      colSpan="md:col-span-2"
      decorative="left"
    />

    <!-- Card 5: Design System -->
    <PortfolioCardLarge
      id="card-5"
      color="accent"
      badge="DiseÃ±o"
      title={tr('portfolio.design.title')}
      description={tr('portfolio.design.description')}
      tags={['Figma', 'Storybook']}
      colSpan="md:col-span-2"
      decorative="circle"
    />

    <!-- Card 6: Social Networks -->
    <PortfolioCardSmall id="card-6" color="accent" title={tr('portfolio.social.title')} centered={true}>
      <SocialLinks
        links={[
          { icon: 'twitter', url: '#', color: 'primary' },
          { icon: 'github', url: '#', color: 'secondary' },
        ]}
      />
    </PortfolioCardSmall>

    <!-- Card 7: Services -->
    <PortfolioCardSmall id="card-7" color="success" title={tr('portfolio.services.title')} centered={false}>
      <ServicesList
        services={[
          { text: tr('portfolio.services.uiux'), gradient: 'primary-secondary' },
          { text: tr('portfolio.services.web'), gradient: 'secondary-accent' },
          { text: tr('portfolio.services.mobile'), gradient: 'success-primary' },
        ]}
      />
    </PortfolioCardSmall>

    <!-- Card 8: Blog -->
    <div class="group relative md:col-span-2 rounded-3xl overflow-hidden bg-background-secondary border border-border hover:border-warning/50 transition-all duration-300 hover:shadow-lg hover:shadow-warning/10 cursor-grab active:cursor-grabbing" data-swapy-slot="card-8">
      <div class="w-full h-full" data-swapy-item="card-8">
        <div class="absolute inset-0 bg-linear-to-bl from-warning/10 to-accent/10 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
        <div class="absolute inset-0 p-8 flex flex-col justify-between z-10">
          <div>
            <span class="inline-block px-3 py-1 rounded-full bg-warning/15 text-warning text-xs font-medium mb-4">Blog</span>
            <h3 class="text-3xl font-bold text-foreground mb-2">{tr('portfolio.blog.title')}</h3>
            <p class="text-foreground-secondary max-w-md">{tr('portfolio.blog.description')}</p>
          </div>
          <div class="flex items-center gap-2 text-sm text-foreground-secondary group-hover:text-primary transition-colors">
            {tr('portfolio.blog.readArticle')} <span class="group-hover:translate-x-1 transition-transform">â†’</span>
          </div>
        </div>
      </div>
    </div>

  </div>
</section>

<script>
  import { initSwapyGrid } from '@scripts/swapy-grid';
  
  // Initialize Swapy when the DOM is ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', () => {
      initSwapyGrid();
    });
  } else {
    initSwapyGrid();
  }
</script>
