import{o as v}from"./index.BXWtuYvb.js";const E="portfolio-db",m="kv";async function f(){return v(E,1,{upgrade(n){n.objectStoreNames.contains(m)||n.createObjectStore(m)}})}async function u(n){await(await f()).put(m,n,"theme-state")}async function l(){return await(await f()).get(m,"theme-state")}async function p(){const n=document.getElementById("theme-toggle"),e=document.getElementById("sun-icon"),t=document.getElementById("moon-icon"),o=document.documentElement,s=await l();let a;s&&s.userSet?(a=s.mode,s.colors&&i(s.colors)):a=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",r(a,!1),n&&n.addEventListener("click",async()=>{await r(a==="light"?"dark":"light",!0)});async function r(c,d=!1){a=c,o.setAttribute("data-theme",c);const h=await l(),w={mode:c,colors:h?.colors,userSet:d||(h?.userSet??!1)};await u(w),e&&t&&(c==="dark"?(e.classList.remove("hidden"),t.classList.add("hidden")):(e.classList.add("hidden"),t.classList.remove("hidden")))}function i(c){const d=document.documentElement;d.style.setProperty("--color-primary",c.primary),d.style.setProperty("--color-secondary",c.secondary),d.style.setProperty("--color-accent",c.accent),d.style.setProperty("--color-success",c.success),d.style.setProperty("--color-warning",c.warning)}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",p):p();window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",async n=>{const t=await await l();if(!t||!t.userSet){const o=n.matches?"dark":"light",s=document.documentElement,a=document.getElementById("sun-icon"),r=document.getElementById("moon-icon");s.setAttribute("data-theme",o),await u({mode:o,colors:t?.colors,userSet:!1}),a&&r&&(o==="dark"?(a.classList.remove("hidden"),r.classList.add("hidden")):(a.classList.add("hidden"),r.classList.remove("hidden")))}});function y(n){const t=n*Math.PI/180,o=Math.cos(t)*.15,s=Math.sin(t)*.15;return`oklab(${.7} ${o.toFixed(3)} ${s.toFixed(3)})`}function b(n){const e=Math.floor(Math.random()*360);return{primary:y(e),secondary:y(e+36),accent:y(e+150),success:"oklab(0.723 -0.16 0.145)",warning:"oklab(0.796 0.04 0.155)"}}function g(n){const e=document.documentElement;e.style.setProperty("--color-primary",n.primary),e.style.setProperty("--color-secondary",n.secondary),e.style.setProperty("--color-accent",n.accent),e.style.setProperty("--color-success",n.success),e.style.setProperty("--color-warning",n.warning)}async function k(){const e=(await l())?.mode||document.documentElement.getAttribute("data-theme")||"light",t=b();return g(t),await u({mode:e,colors:t,userSet:!0}),console.log("Applied random theme",t),colors}document.addEventListener("DOMContentLoaded",async()=>{const n=await l();n&&n.colors&&g(n.colors);const e=document.getElementById("theme-randomize");e&&e.addEventListener("click",async()=>{await k(),document.documentElement.animate([{opacity:.98},{opacity:1}],{duration:220})})});function S(){const n=document.getElementById("card-modal-overlay");if(n)return n;const e=document.createElement("div");e.id="card-modal-overlay",e.style.position="fixed",e.style.inset="0",e.style.display="none",e.style.alignItems="center",e.style.justifyContent="center",e.style.background="rgba(0,0,0,0.4)",e.style.zIndex="9999";const t=document.createElement("div");return t.id="card-modal-container",t.style.width="min(900px, 95%)",t.style.maxHeight="90%",t.style.overflow="auto",t.style.borderRadius="16px",t.style.background="var(--card-bg, white)",t.style.boxShadow="0 10px 30px rgba(0,0,0,0.3)",t.style.padding="1.25rem",t.style.transform="scale(0.98)",t.style.transition="transform 180ms ease, opacity 180ms ease",e.appendChild(t),document.body.appendChild(e),e}function L(n){const e=S(),t=e.querySelector("#card-modal-container");if(!t)return;t.innerHTML="";const o=n.cloneNode(!0);o.removeAttribute("data-swapy-slot"),o.removeAttribute("data-swapy-item"),o.style.width="100%",o.style.height="auto",t.appendChild(o),e.style.display="flex",requestAnimationFrame(()=>{t.style.transform="scale(1)",t.style.opacity="1"}),e.tabIndex=-1,e.focus();function s(i){i.key==="Escape"&&r()}function a(i){i.target===e&&r()}function r(){e.style.display="none",t.style.transform="scale(0.98)",t.innerHTML="",document.removeEventListener("keydown",s),e.removeEventListener("click",a)}document.addEventListener("keydown",s),e.addEventListener("click",a)}document.addEventListener("DOMContentLoaded",()=>{const n=document.querySelector("[data-swapy-container]");n&&n.addEventListener("click",e=>{const o=e.target.closest("[data-swapy-slot]");if(o){const a=o.querySelector("[data-swapy-item]")||o;L(a)}})});
