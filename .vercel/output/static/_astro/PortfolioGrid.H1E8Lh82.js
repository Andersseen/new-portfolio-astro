import{k as j,_ as k}from"./preact.module.B0PSOmE1.js";import{A as C,d as N,y as A}from"./hooks.module.iAQCKk53.js";import{o as z}from"./index.BXWtuYvb.js";import{u as e}from"./jsxRuntime.module.Dm63aad0.js";import{c as v,m as E,I,B as M,A as x}from"./IconMap.DvTVk0cR.js";import{openModal as R}from"./modalStore.C7vgQ3py.js";import"./compat.module.CZVIRGQO.js";import"./createLucideIcon.BNGgQrEB.js";const B="portfolio-db",y="kv";async function L(){return z(B,1,{upgrade(r){r.objectStoreNames.contains(y)||r.createObjectStore(y)}})}async function P(r){await(await L()).put(y,r,"card-order")}async function T(){return await(await L()).get(y,"card-order")}function D({colSpan:r}){return e("div",{className:`h-full w-full rounded-3xl bg-background-secondary border border-border/50 overflow-hidden relative ${r==="col-span-2"?"md:col-span-2":"md:col-span-1"}`,children:[e("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-foreground/5 to-transparent skeleton-shimmer"}),e("div",{className:"p-6 h-full flex flex-col gap-4",children:[e("div",{className:"w-1/3 h-6 bg-foreground/5 rounded-lg"}),e("div",{className:"w-2/3 h-4 bg-foreground/5 rounded-lg"}),e("div",{className:"flex-1"}),e("div",{className:"w-full h-24 bg-foreground/5 rounded-xl"})]})]})}const F={primary:"bg-primary/15 text-primary border-primary/20",secondary:"bg-secondary/15 text-secondary border-secondary/20",accent:"bg-accent/15 text-accent border-accent/20",success:"bg-success/15 text-success border-success/20",warning:"bg-warning/15 text-warning border-warning/20",danger:"bg-danger/15 text-danger border-danger/20"},q={sm:"px-2 py-0.5 text-xs",md:"px-3 py-1 text-sm",lg:"px-4 py-1.5 text-base"};function O({variant:r="primary",size:s="md",children:t,className:a}){return e("span",{className:v(F[r],q[s],"inline-block rounded-full font-bold tracking-wide uppercase border",a),children:t})}const G={default:"bg-background-secondary border border-border",elevated:"bg-background-secondary shadow-lg",outlined:"bg-transparent border-2 border-border",neumorphic:v("bg-background-secondary","shadow-[3px_3px_6px_rgba(0,0,0,0.1),-3px_-3px_6px_rgba(255,255,255,0.8)]","dark:shadow-[3px_3px_6px_rgba(0,0,0,0.3),-3px_-3px_6px_rgba(255,255,255,0.05)]")},V={none:"p-0",sm:"p-3",md:"p-4",lg:"p-6"},U={none:"rounded-none",sm:"rounded-sm",md:"rounded-md",lg:"rounded-lg",xl:"rounded-xl",full:"rounded-3xl"};function W({variant:r="default",padding:s="md",rounded:t="lg",children:a,className:n,onClick:c,hoverable:u=!1}){return e("div",{onClick:c,className:v(G[r],V[s],U[t],u&&"hover:shadow-xl transition-shadow duration-300 cursor-pointer",c&&"cursor-pointer",n),children:a})}const Y={primary:{border:"hover:border-primary/50",shadow:"hover:shadow-primary/10",bg:"bg-primary/10",text:"text-primary"},secondary:{border:"hover:border-secondary/50",shadow:"hover:shadow-secondary/10",bg:"bg-secondary/10",text:"text-secondary"},accent:{border:"hover:border-accent/50",shadow:"hover:shadow-accent/10",bg:"bg-accent/10",text:"text-accent"},success:{border:"hover:border-success/50",shadow:"hover:shadow-success/10",bg:"bg-success/10",text:"text-success"},warning:{border:"hover:border-warning/50",shadow:"hover:shadow-warning/10",bg:"bg-warning/10",text:"text-warning"}};function H({id:r,title:s,description:t,badge:a,badgeColor:n="primary",colSpan:c="col-span-1",decorative:u=!1,children:h,tags:f}){const d=Y[n];return e(W,{variant:"default",rounded:"full",padding:"none",hoverable:!u,className:v("group h-full w-full overflow-hidden transition-all duration-300",d.border,`shadow-lg ${d.shadow}`,!u&&"hover:scale-[1.02]"),children:e("div",{className:"relative p-6 h-full flex flex-col z-20",children:[e("div",{className:"flex items-start justify-between gap-4 mb-3",children:[e("div",{className:"flex-1 min-w-0",children:[e("h3",{className:"text-xl font-bold text-foreground mb-1 truncate",children:s}),e("p",{className:"text-sm text-foreground-secondary line-clamp-2",children:t})]}),a&&e(O,{variant:n,size:"sm",children:a})]}),f&&f.length>0&&e("div",{className:"flex flex-wrap gap-2 mb-4",children:f.map(o=>e(O,{variant:n,size:"sm",children:o},o))}),e("div",{className:"flex-1 flex flex-col justify-end",children:h&&e("div",{className:"flex-shrink-0 ml-4",children:h})})]})})}function J({item:r,colSpan:s,onSelect:t}){return e("div",{"data-swapy-item":r.id,className:"w-full h-full",onClick:()=>t(r.id),children:e(E.div,{layoutId:r.id,className:"h-full",children:e(H,{id:r.id,title:r.title,description:r.description||"",colSpan:s,badge:r.type==="projects"?"Featured":r.type==="articles"?"Recent":void 0,badgeColor:r.type==="projects"?"primary":r.type==="articles"?"success":"primary",children:[r.type==="social"&&r.content&&e("div",{className:"flex gap-4 justify-center mt-4",children:r.content.map(a=>{const n=I[a.icon];return e(M,{href:a.url,variant:"ghost",size:"icon",className:`rounded-xl bg-${a.color}/10 text-${a.color} hover:bg-${a.color}/20 group relative overflow-visible transition-all duration-300 hover:-translate-y-1`,title:a.label||a.icon,children:[e("div",{className:"absolute inset-0 bg-current opacity-0 group-hover:opacity-10 blur-md transition-opacity duration-300"}),n&&e(n,{className:"w-6 h-6 z-10 relative drop-shadow-md"})]},a.url)})}),r.type==="stack"&&r.details?.categories&&e("div",{className:"grid grid-cols-2 gap-3 mt-4",children:[...r.details.categories.flatMap(c=>c.items)].sort(()=>.5-Math.random()).slice(0,4).map(c=>e("div",{className:"flex items-center justify-center p-3 rounded-lg bg-background-tertiary border border-border/50",children:e("span",{className:"text-sm font-medium text-foreground-secondary",children:c.name})},c.name))}),r.type==="services"&&r.content&&e("div",{className:"mt-4 space-y-2",children:r.content.map((a,n)=>e("div",{className:"flex items-center gap-2",children:[e("div",{className:`w-2 h-2 rounded-full bg-gradient-to-r ${a.gradient}`}),e("span",{className:"text-sm text-foreground-secondary",children:a.text})]},n))}),r.type==="projects"&&e("div",{className:"flex items-center gap-2 text-sm font-medium text-primary/80 group-hover:text-primary transition-colors",children:[r.actionLabel||"View More",e("span",{className:"group-hover:translate-x-1 transition-transform",children:e(x,{className:"w-4 h-4"})})]}),r.type==="community"&&e("div",{className:"mt-4 flex flex-col gap-2",children:[e("div",{className:"text-sm text-foreground-secondary",children:"Contributions & Open Source"}),e("div",{className:"flex items-center gap-2 text-sm font-medium text-secondary/80 group-hover:text-secondary transition-colors",children:[r.actionLabel||"Contributions",e("span",{className:"group-hover:translate-x-1 transition-transform",children:e(x,{className:"w-4 h-4"})})]})]}),r.type==="design"&&e("div",{className:"flex items-center gap-2 text-sm font-medium text-accent/80 group-hover:text-accent transition-colors",children:[r.actionLabel||"Gallery",e("span",{className:"group-hover:translate-x-1 transition-transform",children:e(x,{className:"w-4 h-4"})})]}),r.type==="articles"&&e("div",{className:"flex items-center gap-2 text-sm font-medium text-success/80 group-hover:text-success transition-colors",children:[r.actionLabel||"Read more",e("span",{className:"group-hover:translate-x-1 transition-transform",children:e(x,{className:"w-4 h-4"})})]})]})})})}const b=["col-span-2","col-span-1","col-span-1","col-span-1","col-span-1","col-span-1","col-span-2"];function te({initialItems:r}){const s=C(null),t=C(null),[a,n]=N(!1),[c,u]=N(r),[h,f]=N(!1);return A(()=>{let d=!0;const o=async()=>{const m=window.innerWidth<768;if(f(m),t.current&&(t.current.destroy(),t.current=null),!m&&a&&s.current)try{const{createSwapy:i}=await k(async()=>{const{createSwapy:p}=await import("./swapy.DWAztmsg.js");return{createSwapy:p}},[]);if(!d)return;t.current=i(s.current,{animation:"dynamic"}),t.current.onSwapEnd(async p=>{const g=s.current?.querySelectorAll("[data-swapy-slot]");if(!g)return;const w=[];g.forEach($=>{const S=$.querySelector("[data-swapy-item]");if(S){const _=S.getAttribute("data-swapy-item");_&&w.push(_)}}),w.length>0&&await P(w)})}catch(i){console.error("Failed to load Swapy:",i)}};o();const l=()=>{o()};return window.addEventListener("resize",l),()=>{d=!1,window.removeEventListener("resize",l),t.current&&t.current.destroy()}},[a]),A(()=>{(async()=>{try{const o=await T();if(!o||!Array.isArray(o)||o.length===0){n(!0);return}const l=[...r].sort((m,i)=>{const p=o.indexOf(m.id),g=o.indexOf(i.id);return p===-1?1:g===-1?-1:p-g});u(l)}catch(o){console.error("Failed to load order from IDB",o)}finally{n(!0)}})()},[]),a?e(j,{children:e("div",{ref:s,className:"grid grid-cols-1 md:grid-cols-3 gap-6 auto-rows-[300px]",id:"portfolio-grid",children:c.map((d,o)=>{const l=b[o%b.length];return e("div",{"data-swapy-slot":d.id,className:`${l==="col-span-2"?"md:col-span-2":"md:col-span-1"}`,style:h?{touchAction:"pan-y"}:void 0,children:e(J,{item:d,colSpan:l,onSelect:m=>{const i=c.find(p=>p.id===m);i&&R(i)}})},d.id)})})}):e("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 auto-rows-[300px]",children:r.map((d,o)=>{const l=b[o%b.length];return e("div",{className:`${l==="col-span-2"?"md:col-span-2":"md:col-span-1"}`,children:e(D,{colSpan:l})},d.id)})})}export{te as default};
